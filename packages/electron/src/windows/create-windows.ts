import { ProcessIDs } from './process-ids'
import { WindowManager } from './windows-manager'

// This allows TypeScript to pick up the magic constants that's auto-generated by Forge's Webpack
// plugin that tells the Electron app where to look for the Webpack-bundled app code (depending on
// whether you're running in development or production).
declare const APP_WINDOW_WEBPACK_ENTRY: string
declare const WORKER_WINDOW_WEBPACK_ENTRY: string
declare const SYNC_WORKER_WEBPACK_ENTRY: string

/**
 * Create all the windows for the application.
 */
export function createWindows() {
  if (!WindowManager.has(ProcessIDs.WORKER)) {
    // Create Worker Window
    WindowManager.createProcessWindow(ProcessIDs.WORKER, WORKER_WINDOW_WEBPACK_ENTRY, true, true)
  }

  if (!WindowManager.has(ProcessIDs.SYNC)) {
    // Create Sync Worker Window
    WindowManager.createProcessWindow(ProcessIDs.SYNC, SYNC_WORKER_WEBPACK_ENTRY)
  }

  if (!WindowManager.has(ProcessIDs.APP)) {
    // Create App Window
    WindowManager.createMainAppWindow(APP_WINDOW_WEBPACK_ENTRY)
  }
}
